<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "Events@Penn" %></title>
    <meta name="description" content="<%= content_for?(:description) ? yield(:description) : " Events@Penn" %>">
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,400i,900" rel="stylesheet">
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => 'reload' %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <header>
      <%= render 'layouts/navigation' %>
    </header>
    <main role="main">
      <div class="container-fluid main">
        <%= render 'layouts/messages' %>
        <div class="row">
          <div class="col-md-8">
            <select class="form-control pull-left calendar-filter" disabled>
              <option>Filter Events by Category</option disabled>
            </select>
            <% if user_signed_in? && !current_user.orgs.empty? %>
              <a class="btn btn-info pull-right calendar-create" href="/events/new">Add an Event</a>
            <% end %>
            <% @events = Event.all %>
            <%= month_calendar(attribute: :start_date, end_attribute: :end_date, events: @events) do |date, meetings| %>
            <div class="date" data-date="<%= "#{date.year}-#{date.month}-#{date.day}" %>">
              <%= date.day %>
            </div>
            <% meetings.each do |event| %>
            <div class="calendar-event">
              <%= link_to event.title, event %>
            </div>
            <% end %>
            <% end %>
          </div>
          <div class="col-md-4">
            <% if current_page?(new_event_path) %>
              <h2 class="new-event">Add Event</h2>
              <div class="panel panel-default filled calendar-sidebar new-event">
                <div class="panel-body">
                  <%= yield %>
                </div>
              </div>
            <% else %>
              <div class="panel-date"></div>
              <div class="panel panel-default filled calendar-sidebar">
                <div class="panel-body">
                  <%= yield %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <%= render 'layouts/navbottom' %>
    </footer>
  </body>
</html>
