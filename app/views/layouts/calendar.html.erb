<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "Events@Penn" %></title>
    <meta name="description" content="<%= content_for?(:description) ? yield(:description) : " Events@Penn" %>">
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,400,400i,900" rel="stylesheet">
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => 'reload' %>
    <%= google_tag_manager %>
    <%= csrf_meta_tags %>

    <%-# favicons %>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="manifest" href="/favicons/manifest.json">
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#aa1e22">
    <link rel="shortcut icon" href="/favicons/favicon.ico">
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    <meta name="apple-mobile-web-app-title" content="Events@Penn">
    <meta name="application-name" content="Events@Penn">
    <meta name="theme-color" content="#aa1e22">
  </head>
  <body>
    <header>
      <%= render 'layouts/navigation' %>
    </header>
    <main role="main">
      <div class="container-fluid main">
        <%= render 'layouts/messages' %>
        <div class="row">
          <div class="col-md-8">
            <select class="form-control pull-left calendar-filter" disabled>
              <option>Filter Events by Category</option disabled>
            </select>
            <% if user_signed_in? && !current_user.orgs.empty? %>
              <a class="btn btn-info pull-right calendar-create" href="/events/new">Add an Event</a>
            <% end %>
            <% @events = Event.all %>
            <%= month_calendar(attribute: :start_date, end_attribute: :end_date, events: @events) do |d, meetings| %>
            <div class="date" data-date="<%= "#{d.strftime("%Y-%m-%d")}" %>">
              <span class="date-num"><%= d.day %></span>
              <% if mobile_device? %>
                <% case d.wday %>
                  <% when 0 %>
                    <span class="mobile-weekday">Sunday</span>
                  <% when 1 %>
                    <span class="mobile-weekday">Monday</span>
                  <% when 2 %>
                    <span class="mobile-weekday">Tuesday</span>
                  <% when 3 %>
                    <span class="mobile-weekday">Wednesday</span>
                  <% when 4 %>
                    <span class="mobile-weekday">Thursday</span>
                  <% when 5 %>
                    <span class="mobile-weekday">Friday</span>
                  <% when 6 %>
                    <span class="mobile-weekday">Saturday</span>
                <% end %>
              <% end %>
            </div>
            <% meetings.each do |event| %>
            <div class="calendar-event">
              <%= link_to event.title, event %>
            </div>
            <% end %>
            <% end %>
          </div>
          <div class="col-md-4">
              <div class="panel-date">
                <% if current_page?(new_event_path) %>
                  <h3 class="new-event">Add Event</h3>
                <% end %>
              </div>
              <div class="panel panel-default filled calendar-sidebar">
                <div class="panel-body">
                  <%= yield %>
                </div>
              </div>
            <%= render 'ads/rectangle1' if mobile_device? %>
            <%= render 'ads/rectangle2' if mobile_device? %>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <%= render 'layouts/navbottom' %>
    </footer>
  </body>
</html>
